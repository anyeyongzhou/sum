<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      * {
        margin: 0;
      }
      .box {
        width: 100px;
        height: 100px;
        background-color: #fac;
        position: absolute;
        left: 0;
      }
    </style>
  </head>
  <body>
    <div class="box"></div>
    <script>
      // åŸºæœ¬é€»è¾‘
      // éšæœºæ•° Math.random();
      // è¿åŠ¨ åŠ¨ç”» éšç€æ—¶é—´çš„è¿›è¡Œé€å¸§çš„æ’­æ”¾ï¼Œå½¢æˆçš„åŠ¨ç”»ï¼Œï¼Ÿ
      // è®©ä¸€ä¸ªå…ƒç´ çš„top ä» 100px åˆ° 0px
      // topå±æ€§ï¼Œéšç€æ—¶é—´çš„å˜åŒ–è€Œå˜åŒ–
      // 1s 100px
      // 2s 99px
      // 3s 98px
      // 100s 1px
      // éšç€æ—¶é—´çš„å˜åŒ–å…ƒç´ è¶Šèµ°è¶Šè¿œ

      // è·Ÿæ—¶é—´ç›¸å…³çš„æ–¹æ³•ï¼Ÿ
      // å®šæ—¶å™¨ setInterval, setTimeout
      // setInterval é—´éš”å®šæ—¶å™¨  æ¯éš”ä¸€æ®µæ—¶é—´æ‰§è¡Œä¸€æ¬¡ æ‰§è¡Œå¤šæ¬¡ï¼Œ å’ŒåŠ¨ç”»çš„åŸç†ç±»ä¼¼ï¼Œéƒ½æ˜¯
      // setTimeout  è¶…æ—¶å®šæ—¶å™¨  è¿‡äº†ä¸€æ®µæ—¶é—´åæ‰§è¡Œ   æ‰§è¡Œä¸€æ¬¡

      // é—´éš”å®šæ—¶å™¨
      // å¼€å¯å®šæ—¶å™¨ æ¯éš” æ—¶é—´é—´éš” æ‰§è¡Œå‡½æ•°ï¼Œ æ—¶é—´é—´éš”å•ä½ æ¯«ç§’ 1ç§’ = 1000æ¯«ç§’
      // setInterval(å‡½æ•°ï¼Œæ—¶é—´é—´éš”)
      // æ²¡éš”ä¸€ç§’é’Ÿï¼Œè¾“å‡ºä¸€ä¸ª 1
      // var tid = setInterval(function () {
      //   console.log(1);
      // }, 1000);

      // setInterval å‡½æ•°è¿”å›å€¼ï¼Œ è¿”å›å€¼ä¸ºæ•°å­—ï¼Œç”¨äºè¡¨ç¤ºå®šæ—¶ç¼–å·ï¼Œè¡¨ç¤ºç¬¬å‡ ä¸ª é—´éš”å®šæ—¶å™¨
      // å…³é—­é—´éš”å®šæ—¶å™¨ï¼ŒclearInterval(å®šæ—¶å™¨ç¼–å·)

      //æ²¡éš”ä¸€ç§’è¾“å‡º1 è¾“å‡º10æ¬¡1 åœæ­¢
      // var num = 0;
      // var tid = setInterval(function () {
      //   num ++;
      //   console.log(1);
      //   if (num == 10) {
      //     clearInterval(tid);
      //   }
      // }, 1000);

      // å›å½’æ­£é¢˜ï¼Œè®©ä¸€ä¸ªå…ƒç´ left ä»0 px è¿åŠ¨åˆ° 100px;
      // var left = 0;
      // var tid = setInterval(function () {
      //   left ++;
      //   box.style.left = left + 'px';
      //   if (left == 100) {
      //     clearInterval(tid);
      //   }
      // }, 10);

      // ç»§ç»­ä¼˜åŒ–ï¼ï¼ˆå°è£…æ–¹å‘ï¼Œ å°†å˜é‡æŠ½ç¦»ï¼‰
      var dom = document.getElementsByClassName("box")[0];

      // var start = 0;
      // var end = 100;
      // // å…ƒç´ ç›¸å¯¹èµ·ç‚¹è¿åŠ¨çš„è·ç¦»
      // var distance = start;
      // // å¦‚æœæƒ³æ§åˆ¶å…ƒç´ è¿åŠ¨çš„å¿«æ…¢ï¼Ÿå¦‚ä½•ï¼Œæ—¶é—´é—´éš”ï¼Œæ­¥é•¿ï¼ˆå•ä½æ—¶é—´ï¼Œèµ°çš„çš„è·ç¦»ï¼‰
      // var step = 3;
      // var prop = "left";
      // var tid = setInterval(function () {
      //   distance += step;
      //   dom.style[prop] = distance + "px";
      //   // æ ¡å‡†
      //   if (distance >= end) {
      //     // å½’ä½
      //     dom.style[prop] = end + "px";
      //     clearInterval(tid);
      //   }
      // }, 50);
      //  dom's prop  from  start to end use time , after fn();
      function move(dom, prop, start, end, t, fn) {
        var distance = start;
        // å¦‚æœæƒ³æ§åˆ¶å…ƒç´ è¿åŠ¨çš„å¿«æ…¢ï¼Ÿå¦‚ä½•ï¼Œæ—¶é—´é—´éš”ï¼Œæ­¥é•¿ï¼ˆå•ä½æ—¶é—´ï¼Œèµ°çš„çš„è·ç¦»ï¼‰
        // var step = 3;
        // v = l / t
        // (end- start) / t
        var step = ((end - start) / t) * 10;
        // è¿™é‡Œçš„ è´Ÿæ•°ï¼Œä»£è¡¨çš„æ˜¯æ–¹å‘
        // if (end < start) {
        //   step *= -1;
        // }

        var tid = setInterval(function () {
          distance += step;
          dom.style[prop] = distance + "px";
          // æ ¡å‡†
          if ((distance >= end && step > 0) || (distance <= end && step < 0)) {
            // å½’ä½
            dom.style[prop] = end + "px";
            clearInterval(tid);
            if (typeof fn == "function") {
              fn();
            }
          }
        }, 10);
        dom.setAttribute("tid", tid);
      }

      // ç»§ç»­ä¼˜åŒ–ï¼ ï¼ˆç»†èŠ‚ï¼‰
      // move(dom, 'left', 0, 300)
      // move(dom, "left", 0, 300, function () {
      //   move(dom, "top", 0, 300, function () {
      //     move(dom, "left", 300, 0, function () {
      //       move(dom, "top", 300, 0, function () {
      //         alert("æˆ‘è¿åŠ¨å®Œäº†");
      //       });
      //     });
      //   });
      // });

      // å›è°ƒåœ°ç‹±ğŸ‘†
      console.time("on");
      move(dom, "left", 0, 300, 6000, function () {
        console.timeEnd("on");
      });

      Element.prototype.clearInterval = function () {
        var tid = this.getAttribute("tid");
        clearInterval(tid);
      };
      // dom.clearInterval();
    </script>
  </body>
</html>
