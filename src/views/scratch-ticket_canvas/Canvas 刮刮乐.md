# Canvas 刮刮乐

## 一、Canvas 基础知识

### 基本概念

1. Canvas 是个H5中新增的标签
2. Canvas 默认宽高 300 * 150
3. 设置canvas标签的尺寸应该使用行内属性的方式，而不是css样式，因为css样式会将画布拉伸
4. canvas标签是有兼容性问题的，所以在不支持canvas的浏览器中，会被当做div处理，所以一般会在canvas中书写一些提示信息，这些信息只有在不支持canvas的浏览器中才会显示出来
5. canvas的api兼容性非常好，所有支持canvas的浏览器中，api的使用方式都是一致的
6. canvas是一个画布，他自己不能绘制图形，需要使用绘图工具，页面中每一个canvas标签都有自己的绘图工具

### 常用 api

| api                                                   | 说明                                                         |
| ----------------------------------------------------- | ------------------------------------------------------------ |
| canvas.getContext(type)                               | 这个方法可以用来获取绘图工具，type用来指定绘图工具的类型 type有两种值： "2d" "webgl" |
| context.moveTo(x, y)                                  | 这个方法用来确定起始位置 x,y 表示坐标                        |
| context.lineTo(x, y)                                  | 这个方法用来确定结束位置 x,y 表示坐标 本次lineTo点，将会成为下次lineTo的起点 |
| context.stroke()                                      | 这个方法用来将当前路径下所有绘制的内容，进行描边             |
| context.fill()                                        | 这个方法用来将当前路径下所有绘制的内容，进行填充             |
| context.beginPath()                                   | 这个方法用来开启新的路径，每当要换一种新的绘图方式，或者绘图状态（颜色，样式。。。）的时候，就需要开启一个新的路径 |
| context.rect(x, y, w, h)                              | 绘制一个矩形的路径，注意：只会创建路径，不会描边也不会填充！ |
| ctx.clearRect(x, y, w, h)                             | 清空一个矩形区域，注意：一般用的最多的情况就是清除整张画布   |
| ctx.arc(x, y, r, startAngle, endAngle, anticlockwise) | x, y: 圆心坐标 r: 半径 startAngle endAngle： 开始、结束角度（弧度制）  0度角在原点的3点钟方向 |
| context.clip()                                        | clip() 方法从原始画布中剪切任意形状和尺寸。一旦剪切了某个区域，则所有之后的绘图都会被限制在被剪切的区域内（不能访问画布上的其他区域） |
| context.save()                                        | 暂存当前context状态                                          |
| context.restore()                                     | 恢复上次一save的context状态                                  |




## 二、 使用 Canvas 实现刮刮乐

### 原理说明

1. 中奖结果其实和用户的刮开动作无关，是提前就已经确定好的
2. 中奖结果的图片设置为 canvas 的背景
3. 用指定的颜色填充整个 canvas
4. 当按下鼠标移动的时候，以指定大小的圆型区域清除鼠标所在位置的填充色，背景图片就会显露